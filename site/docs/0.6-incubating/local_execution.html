<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apache Flink (incubating): Local Execution</title>
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/bootstrap-lumen-custom.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="/css/custom.css">
    <link rel="css/codetabs.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="js/codetabs.js"></script>
  </head>
  <body>

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://flink.incubator.apache.org">Apache Flink</a>
    </div>

    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav">

        <li>
          <a href="index.html" class="">Documentation</a>
        </li>

        <li>
          <a href="api/java/index.html">Javadoc</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

    <div style="padding-top:70px" class="container">

      <div class="row">
        <div class="col-md-3">
          <ul>
    <li>Quickstart
        <ul>
            <li><a href="setup_quickstart.html">Install</a></li>
            <li><a href="run_example_quickstart.html">Run Example</a></li>
            <li><a href="java_api_quickstart.html">Java API</a></li>
            <li><a href="scala_api_quickstart.html">Scala API</a></li>
            <li><a href="faq.html">FAQ</a></li>
        </ul>
    </li>

    <li>Setup &amp; Configuration
        <ul>
            <li><a href="building.html">Build Instructions</a></li>
            <li><a href="local_setup.html">Local Setup</a></li>
            <li><a href="cluster_setup.html">Cluster Setup</a></li>
            <li><a href="yarn_setup.html">YARN Setup</a></li>
            <li><a href="config.html">Configuration</a></li>
        </ul>
    </li>

    <li>Programming Guides
        <ul>
            <li><a href="java_api_guide.html">Java API</a></li>
            <li><a href="java_api_transformations.html">Java API Transformations</a></li>
            <li><a href="scala_api_guide.html">Scala API</a></li>
            <li><a href="iterations.html">Iterations</a></li>
            <li><a href="spargel_guide.html">Spargel Graph API</a></li>
        </ul>
    </li>

    <li>Examples
        <ul>
            <li><a href="java_api_examples.html">Java API</a></li>
            <li><a href="scala_api_examples.html">Scala API</a></li>
            <li><a href="example_connectors.html">Connecting to other systems</a></li>
        </ul>
    </li>

    <li>Execution
        <ul>
            <li><a href="local_execution.html">Local/Debugging</a></li>
            <li><a href="cluster_execution.html">Cluster</a></li>
            <li><a href="cli.html">Command-Line Interface</a></li>
            <li><a href="web_client.html">Web Interface</a></li>
        </ul>
    </li>

    <li>Internals
        <ul>
            <li><a href="internal_overview.html">Overview</a></li>
            <li><a href="internal_general_arch.html">General Architecture</a></li>
            <li><a href="internal_add_operator.html">How-to: Adding a new Operator</a></li>
        </ul>
    </li>
</ul>
        </div>  
        <div class="col-md-9">
          <h1>Local Execution</h1>

          <h1 id="local-execution/debugging">Local Execution/Debugging</h1>

<p>Flink can run on a single machine, even in a single Java Virtual Machine. This allows users to test and debug Flink programs locally. This section gives an overview of the local execution mechanisms.</p>

<p><strong>NOTE:</strong> Please also refer to the <a href="java_api_guide.html#debugging">debugging section</a> in the Java API documentation for a guide to testing and local debugging utilities in the Java API.</p>

<p>The local environments and executors allow you to run Flink programs in local Java Virtual Machine, or with within any JVM as part of existing programs. Most examples can be launched locally by simply hitting the &quot;Run&quot; button of your IDE.</p>

<p>If you are running Flink programs locally, you can also debug your program like any other Java program. You can either use <code>System.out.println()</code> to write out some internal variables or you can use the debugger. It is possible to set breakpoints within <code>map()</code>, <code>reduce()</code> and all the other methods.</p>

<p>The <code>JobExecutionResult</code> object, which is returned after the execution finished, contains the program runtime and the accumulator results.</p>

<p><em>Note:</em> The local execution environments do not start any web frontend to monitor the execution.</p>

<h1 id="maven-dependency">Maven Dependency</h1>

<p>If you are developing your program in a Maven project, you have to add the <code>flink-clients</code> module using this dependency:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apache.flink<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>flink-clients<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.6.1-incubating<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<h1 id="local-environment">Local Environment</h1>

<p>The <code>LocalEnvironment</code> is a handle to local execution for Flink programs. Use it to run a program within a local JVM - standalone or embedded in other programs.</p>

<p>The local environment is instantiated via the method <code>ExecutionEnvironment.createLocalEnvironment()</code>. By default, it will use as many local threads for execution as your machine has CPU cores (hardware contexts). You can alternatively specify the desired parallelism. The local environment can be configured to log to the console using <code>enableLogging()</code>/<code>disableLogging()</code>.</p>

<p>In most cases, calling <code>ExecutionEnvironment.getExecutionEnvironment()</code> is the even better way to go. That method returns a <code>LocalEnvironment</code> when the program is started locally (outside the command line interface), and it returns a pre-configured environment for cluster execution, when the program is invoked by the <a href="cli.html">command line interface</a>.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="n">ExecutionEnvironment</span><span class="o">.</span><span class="na">createLocalEnvironment</span><span class="o">();</span>

    <span class="n">DataSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">readTextFile</span><span class="o">(</span><span class="s">&quot;file:///path/to/file&quot;</span><span class="o">);</span>

    <span class="n">data</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">new</span> <span class="n">FilterFunction</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">filter</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;http://&quot;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">})</span>
        <span class="o">.</span><span class="na">writeAsText</span><span class="o">(</span><span class="s">&quot;file:///path/to/result&quot;</span><span class="o">);</span>

    <span class="n">env</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>
<h1 id="local-executor">Local Executor</h1>

<p>The <em>LocalExecutor</em> is similar to the local environment, but it takes a <em>Plan</em> object, which describes the program as a single executable unit. The <em>LocalExecutor</em> is typically used with the Scala API. </p>

<p>The following code shows how you would use the <code>LocalExecutor</code> with the Wordcount example for Scala Programs:</p>
<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="n">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">input</span> <span class="k">=</span> <span class="nc">TextFile</span><span class="o">(</span><span class="s">&quot;hdfs://path/to/file&quot;</span><span class="o">)</span>

    <span class="k">val</span> <span class="n">words</span> <span class="k">=</span> <span class="n">input</span> <span class="n">flatMap</span> <span class="o">{</span> <span class="k">_</span><span class="o">.</span><span class="n">toLowerCase</span><span class="o">().</span><span class="n">split</span><span class="o">(</span><span class="s">&quot;&quot;&quot;\W+&quot;&quot;&quot;</span><span class="o">)</span> <span class="n">filter</span> <span class="o">{</span> <span class="k">_</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span> <span class="o">}</span> <span class="o">}</span>
    <span class="k">val</span> <span class="n">counts</span> <span class="k">=</span> <span class="n">words</span> <span class="n">groupBy</span> <span class="o">{</span> <span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">}</span> <span class="n">count</span><span class="o">()</span>

    <span class="k">val</span> <span class="n">output</span> <span class="k">=</span> <span class="n">counts</span><span class="o">.</span><span class="n">write</span><span class="o">(</span><span class="n">wordsOutput</span><span class="o">,</span> <span class="nc">CsvOutputFormat</span><span class="o">())</span>

    <span class="k">val</span> <span class="n">plan</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ScalaPlan</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="n">output</span><span class="o">),</span> <span class="s">&quot;Word Count&quot;</span><span class="o">)</span>
    <span class="nc">LocalExecutor</span><span class="o">.</span><span class="n">executePlan</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>
<h1 id="localdistributedexecutor">LocalDistributedExecutor</h1>

<p>Flink also offers a <code>LocalDistributedExecutor</code> which starts multiple TaskManagers within one JVM. The standard <code>LocalExecutor</code> starts one JobManager and one TaskManager in one JVM.
With the <code>LocalDistributedExecutor</code> you can define the number of TaskManagers to start. This is useful for debugging network related code and more of a developer tool than a user tool.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="n">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

    <span class="n">DataSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">readTextFile</span><span class="o">(</span><span class="s">&quot;hdfs://path/to/file&quot;</span><span class="o">);</span>

    <span class="n">data</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">new</span> <span class="n">FilterFunction</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">filter</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;http://&quot;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">})</span>
        <span class="o">.</span><span class="na">writeAsText</span><span class="o">(</span><span class="s">&quot;hdfs://path/to/result&quot;</span><span class="o">);</span>

    <span class="n">Plan</span> <span class="n">p</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">createProgramPlan</span><span class="o">();</span>
    <span class="n">LocalDistributedExecutor</span> <span class="n">lde</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">LocalDistributedExecutor</span><span class="o">();</span>
    <span class="n">lde</span><span class="o">.</span><span class="na">startNephele</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span> <span class="c1">// start two TaskManagers</span>
    <span class="n">lde</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>

          <div style="padding-top:30px" id="disqus_thread"></div>
      
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'stratosphere-eu'; // required: replace example with your forum shortname

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

          </div>
        </div>

        <div class="footer">
          
          <p><hr class="divider"></p>

<p><small>Apache Flink is an effort undergoing incubation at The Apache Software
Foundation (ASF), sponsored by the Apache Incubator PMC. Incubation is
required of all newly accepted projects until a further review indicates that
the infrastructure, communications, and decision making process have
stabilized in a manner consistent with other successful ASF projects. While
incubation status is not necessarily a reflection of the completeness or
stability of the code, it does indicate that the project has yet to be fully
endorsed by the ASF.</small></p>

<p><a href="http://incubator.apache.org/"><img src="/img/apache-incubator-logo.png" alt="Incubator Logo"></a></p>

<p class="text-center"><a href="/privacy-policy.html">Privacy Policy<a></p>

        </div>
      </div>
    </div>

    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');

    </script>

  </body>
</html>
