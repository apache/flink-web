<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink: 贡献代码</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/flink.css">
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Blog RSS feed -->
    <link href="/blog/feed.xml" rel="alternate" type="application/rss+xml" title="Apache Flink Blog: RSS feed" />

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- We need to load Jquery in the header for custom google analytics event tracking-->
    <script src="/js/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>  
    

    <!-- Main content. -->
    <div class="container">
    <div class="row">

      
     <div id="sidebar" class="col-sm-3">
        

<!-- Top navbar. -->
    <nav class="navbar navbar-default">
        <!-- The logo. -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="navbar-logo">
            <a href="/zh/">
              <img alt="Apache Flink" src="/img/flink-header-logo.svg" width="147px" height="73px">
            </a>
          </div>
        </div><!-- /.navbar-header -->

        <!-- The navigation links. -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-main">

            <!-- First menu section explains visitors what Flink is -->

            <!-- What is Stream Processing? -->
            <!--
            <li><a href="/zh/streamprocessing1.html">What is Stream Processing?</a></li>
            -->

            <!-- What is Flink? -->
            <li><a href="/zh/flink-architecture.html">Apache Flink 是什么?</a></li>

            <!-- Use cases -->
            <li><a href="/zh/usecases.html">应用场景</a></li>

            <!-- Powered by -->
            <li><a href="/zh/poweredby.html">Flink 用户</a></li>

            <!-- FAQ -->
            <li><a href="/zh/faq.html">常见问题</a></li>

            &nbsp;
            <!-- Second menu section aims to support Flink users -->

            <!-- Downloads -->
            <li><a href="/zh/downloads.html">下载</a></li>

            <!-- Quickstart -->
            <li>
              <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.7/quickstart/setup_quickstart.html" target="_blank">教程 <small><span class="glyphicon glyphicon-new-window"></span></small></a>
            </li>

            <!-- Documentation -->
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">文档<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="https://ci.apache.org/projects/flink/flink-docs-release-1.7" target="_blank">1.7 (Latest stable release) <small><span class="glyphicon glyphicon-new-window"></span></small></a></li>
                <li><a href="https://ci.apache.org/projects/flink/flink-docs-master" target="_blank">1.8 (Snapshot) <small><span class="glyphicon glyphicon-new-window"></span></small></a></li>
              </ul>
            </li>

            <!-- getting help -->
            <li><a href="/zh/gettinghelp.html">获取帮助</a></li>

            <!-- Blog -->
            <li><a href="/blog/"><b>Flink 博客</b></a></li>

            &nbsp;

            <!-- Third menu section aim to support community and contributors -->

            <!-- Community -->
            <li><a href="/zh/community.html">社区 &amp; 项目信息</a></li>

            <!-- Roadmap -->
            <li><a href="/zh/roadmap.html">开发计划</a></li>

            <!-- Contribute -->
            <li><a href="/zh/how-to-contribute.html">如何参与贡献</a></li>

            <!-- GitHub -->
            <li>
              <a href="https://github.com/apache/flink" target="_blank">Flink on GitHub <small><span class="glyphicon glyphicon-new-window"></span></small></a>
            </li>

            &nbsp;

            <!-- Language Switcher -->
            <li>
              
                <a href="/contribute-code.html">English</a>
              
            </li>

          </ul>

          <ul class="nav navbar-nav navbar-bottom">
          <hr />

            <!-- Twitter -->
            <li><a href="https://twitter.com/apacheflink" target="_blank">@ApacheFlink <small><span class="glyphicon glyphicon-new-window"></span></small></a></li>

            <!-- Visualizer -->
            <li class=" hidden-md hidden-sm"><a href="/visualizer/" target="_blank">Plan Visualizer <small><span class="glyphicon glyphicon-new-window"></span></small></a></li>

          </ul>
        </div><!-- /.navbar-collapse -->
    </nav>

      </div>
      <div class="col-sm-9">
      <div class="row-fluid">
  <div class="col-sm-12">
    <h1>贡献代码</h1>

	<p>Apache Flink 的维护、改进和扩展都来自于志愿者的代码贡献。Apache Flink 社区鼓励任何人贡献源代码。为了确保贡献者和审阅者愉快地贡献高质量的代码，请遵循本文档中介绍的贡献流程。</p>

<p>本文档包含了所有关于 Apache Flink 贡献代码的要点。它描述了准备，测试和提交贡献的流程，阐释了 Flink 代码库的编码指南和代码风格，并提供了设置开发环境的说明。</p>

<p><strong>重要</strong>：在开始编写代码之前，请仔细阅读本文档。遵循下面描述的流程和指南非常重要。否则，你的 pull request 可能不被接受或可能需要大量返工。特别的，在提交实现<strong>新功能</strong>的 pull request 之前，你需要创建一个 Jira issue 并与社区就是否需要此功能达成共识。</p>

<div class="page-toc">
<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">代码贡献流程</a>    <ul>
      <li><a href="#section-1" id="markdown-toc-section-1">在你编码之前…</a></li>
      <li><a href="#section-2" id="markdown-toc-section-2">编码时…</a></li>
      <li><a href="#section-3" id="markdown-toc-section-3">验证代码的合规性</a></li>
      <li><a href="#section-4" id="markdown-toc-section-4">准备并提交你的代码贡献</a></li>
    </ul>
  </li>
  <li><a href="#section-5" id="markdown-toc-section-5">编码指南</a></li>
  <li><a href="#section-10" id="markdown-toc-section-10">代码风格</a>    <ul>
      <li><a href="#section-11" id="markdown-toc-section-11">许可证</a></li>
      <li><a href="#section-12" id="markdown-toc-section-12">导入</a></li>
      <li><a href="#section-13" id="markdown-toc-section-13">命名</a></li>
      <li><a href="#section-14" id="markdown-toc-section-14">空格</a></li>
      <li><a href="#section-15" id="markdown-toc-section-15">大括号</a></li>
      <li><a href="#javadocs" id="markdown-toc-javadocs">Javadocs</a></li>
      <li><a href="#section-16" id="markdown-toc-section-16">修饰符</a></li>
      <li><a href="#section-17" id="markdown-toc-section-17">文件</a></li>
      <li><a href="#section-18" id="markdown-toc-section-18">杂项</a></li>
    </ul>
  </li>
  <li><a href="#section-19" id="markdown-toc-section-19">最佳实践</a></li>
  <li><a href="#section-20" id="markdown-toc-section-20">设置开发环境</a>    <ul>
      <li><a href="#flink-" id="markdown-toc-flink-">开发和构建 Flink 的先决条件</a></li>
      <li><a href="#section-22" id="markdown-toc-section-22">代理设置</a></li>
    </ul>
  </li>
  <li><a href="#committer--git" id="markdown-toc-committer--git">Committer 如何使用 Git</a></li>
</ul>

</div>

<h2 id="section">代码贡献流程</h2>

<h3 id="section-1">在你编码之前…</h3>

<p>…请确保有与你的贡献相对应的 Jira 问题。这是 Flink 社区遵循所有代码贡献的一般规则，包括错误修复、改进或新功能，但 <em>琐碎</em> 的热修复除外。如果你想修复发现的错误，或者想要为 Flink 添加新功能或改进，在开始实现之前请按照 <a href="/zh/how-to-contribute.html#file-a-bug-report">如何提交错误报告</a> 和 <a href="/zh/how-to-contribute.html#propose-an-improvement-or-a-new-feature">如何提出改进或新功能</a> 指南在 <a href="http://issues.apache.org/jira/browse/FLINK">Flink Jira</a> 中提交一个 issue。</p>

<p>如果 Jira issue 的描述表明其解决方案将触及代码库的敏感部分，或者问题足够复杂，或者需要添加大量新代码，Flink 社区可能会要求提供设计文档（大多数贡献不需要设计文档）。设计文档的目的是为了确保解决问题的总体方案是正确的，并得到社区一致同意的。需要设计文档的 Jira issue 使用 <strong><code>requires-design-doc</code></strong> 标签进行标记，任何社区成员都可以在认为有必要设计文档的 Jira issue 上贴上此标签。良好的描述有助于确定 Jira issue 是否需要设计文档，设计文档必须添加或附加到 Jira issue 或添加一个链接到 Jira issue 页面。设计文档应涵盖以下方面：</p>

<ul>
  <li>解决方案的概述。</li>
  <li>API 更改列表（更改后的接口、新的和弃用的配置参数、更改后的行为 …）。</li>
  <li>要改动的主要模块和类。</li>
  <li>方案的已知局限性。</li>
</ul>

<p>任何人都可以添加设计文档，包括问题的汇报者和修复者。</p>

<p>在设计文档被社区以<a href="http://www.apache.org/foundation/glossary.html#LazyConsensus">延迟决策</a>接受之前，需要设计文档的 Jira issue 的代码贡献将不会被合并到 Flink 的代码库中。请在开始编写代码之前检查是否需要设计文档。</p>

<h3 id="section-2">编码时…</h3>

<p>…请遵守以下规则：</p>

<ul>
  <li>Jira 问题中记录的任何讨论或要求都需要考虑。</li>
  <li>尽可能遵循设计文档（如果有设计文档）。如果你的实现偏离设计文档提出的解决方案太多，请更新设计文档并达成共识。微小的变化是可以的，但是在提交代码贡献时应该指出。</li>
  <li>严格遵循<a href="/zh/contribute-code.html#coding-guidelines">编码指南</a>和<a href="/zh/contribute-code.html#code-style">代码样式</a>。</li>
  <li>不要将不相关的代码混合到一个代码贡献中。</li>
</ul>

<p><strong>请随时提出问题</strong>，可以发送邮件到<a href="/community.html #fmail-list">dev邮件列表</a>或在 Jira issue 下留言。</p>

<p>以下说明将帮助你<a href="/zh/contrib-code.html＃setup-a-development-environment">配置开发环境</a>。</p>

<h3 id="section-3">验证代码的合规性</h3>

<p>在提交你的贡献之前验证更改的合规性非常重要。这包括：</p>

<ul>
  <li>确保代码构建。</li>
  <li>验证所有现有测试和新测试都通过。</li>
  <li>检查是否违反了代码样式。</li>
  <li>确保不包含无关的或不必要的格式更改。</li>
</ul>

<p>你可以通过调用以下代码来构建代码，运行测试并检查（部分）代码样式：</p>

<div class="highlight"><pre><code>mvn clean verify
</code></pre></div>

<p>请注意，Flink 代码库中的一些测试是不稳定的，可能会失败。Flink 社区正在努力改进这些测试，但有时这是不可能的，例如，当测试包括外部依赖时。我们在 Jira 中追踪了所有已知的不稳定测试并贴上了<strong>“test-stability”</strong>标签。如果你遇到似乎与你的更改无关的测试失败，请检查（并扩展）<a href="https://issues.apache.org/jira/issues/?jql=project%20%3D%20FLINK%20AND%20resolution%20%3D%20Unresolved%20AND%20labels%20%3D%20test-stability%20ORDER%20BY%20priority%20DESC">已知的不稳定测试</a> 列表。</p>

<p>请注意，我们还会为 Java、Scala 和 Hadoop 的不同版本组合来运行编译构建（build profiles），以验证你的代码贡献。我们鼓励每个贡献者都使用<em>持续集成</em>服务，无论何时推送更改，它都会自动测试仓库中的代码。<a href="/zh/contribution-code.html#best-practices">最佳实践</a>指南介绍了如何将 <a href="https://travis-ci.org/">Travis</a> 与你的 GitHub 仓库集成。</p>

<p>除了自动化测试之外，请检查更改的差异并删除所有不相关的更改，例如不必要的重新格式化。</p>

<h3 id="section-4">准备并提交你的代码贡献</h3>

<p>要使代码更易于合并，请将其 rebase 到主仓库的 master 分支的最新版本之上。另外还请遵守 <a href="/zh/contribute-code.html#coding-guidelines">commit message指南</a>，清理你的提交历史记录，并将你的提交压缩到一个适当的集合中。请在 rebase 和压缩之后再次验证你的代码贡献。</p>

<p>Flink 项目通过 <a href="https://github.com/apache/flink">GitHub Mirror</a> 以 <a href="https://help.github.com/articles/using-pull-requests">Pull Requests</a> 的形式接受代码贡献。Pull request 是一种提供补丁的简单方法，它提供了一个指向包含更改的代码分支的链接。</p>

<p>要提交 pull request，请将你的贡献推回到 Flink 仓库的分支中。</p>

<div class="highlight"><pre><code>git push origin myBranch
</code></pre></div>

<p>打开你的 fork 仓库网页（<code>https://github.com/&lt;your-user-name&gt;/flink</code>）并使用<em>“Create Pull Request”</em>按钮开始创建 pull request。 确保 base fork 是<code>apache/flink master</code>，并且 head fork 是包含更改的分支。再为 pull request 添加一个有意义的描述并创建它。</p>

<p>也可以将补丁附加到 <a href="https://issues.apache.org/jira/browse/FLINK">Jira</a> issue 页面。</p>

<hr />

<h2 id="section-5">编码指南</h2>

<h3 class="no_toc" id="pull-request--commit-message">Pull request 和 commit message</h3>

<ul>
  <li>
    <p><strong>单 PR 单修改</strong>：请不要将各种不相关的更改组合在单个 PR 中。相反，创建多个单独的 PR 请求，每个 PR 关联一个 Jira issue。这确保了 PR 是与<em>主题相关的</em>，可以更容易地合并，并且通常只会与特定主题相关的 merge 冲突。</p>
  </li>
  <li>
    <p><strong>没有WIP PR</strong>： 我们将 PR 视为引用的代码 <em>就是</em> 将合并到当前 <em>稳定</em> master 分支中的请求。因此，pull request 不应该是“正在进行中”（Working In Process, WIP）。当你确信代码可以合并到当前 master 分支中，再创建 pull request。如果你想对代码先进行一些讨论，可以贴一个你的工作分支的链接。</p>
  </li>
  <li>
    <p><strong>commit message</strong>：PR 必须有相关联的 Jira issue；如果不存在，请先创建一个 Jira issue。最新的提交消息应该引用该 issue。一个提交消息示例是 <strong>[FLINK-633] Fix NullPointerException for empty UDF parameters</strong>。这样，pull request 就已经描述了了它想做什么，例如，用什么方法修复了什么 bug。</p>
  </li>
  <li>
    <p><strong>追加 review commits</strong>：当你的 pull request 收到有关更改和改进的评论后，请为这些更改追加 commits。<em>请不要 rebase 和压缩 commits。</em>这能让人们更清楚的审查你的新的更新，否则，审查者 它允许人们独立地审查清理工作。否则，审阅者必须再次从头到尾审查一遍 diff。</p>
  </li>
  <li>
    <p><strong>不要有 merge commits</strong>：请不要创建任何包含 merge commits 的 PR。如果想要将你的更改更新到最新的 master 分支上，请使用<code>git pull --rebase origin master</code> 命令。</p>
  </li>
</ul>

<h3 class="no_toc" id="section-6">异常和错误信息</h3>

<ul>
  <li>
    <p><strong>吞下异常</strong>：不要吞下异常并打印堆栈跟踪，而是检查类似的类是如何处理异常的。</p>
  </li>
  <li>
    <p><strong>有意义的错误信息</strong>：提供有意义的错误信息消息，试着想象为什么要抛出异常（用户做错了什么），给出的信息要能帮助用户解决问题。</p>
  </li>
</ul>

<h3 class="no_toc" id="section-7">测试</h3>

<ul>
  <li>
    <p><strong>测试需要通过</strong>。测试未通过或编译未成功的 pull request 将不会有任何进一步的审查。我们建议你将个人 GitHub 帐户与 <a href="http://travis-ci.org/">Travis CI</a>（像 Flink GitHub 仓库一样）连接。无论何时将更新推入 <em>你的</em> GitHub 仓库，Travis 都会针对所有测试环境运行测试。请注意之前的<a href="/zh/contribute-code.html#verifying-the-compliance-of-your-code">关于不稳定测试的说明</a>。</p>
  </li>
  <li>
    <p><strong>需要测试新功能</strong>。所有新加的功能都需要测试覆盖，<em>严格要求</em>。非常容易在之后的合并中不小心移除或破坏了这个特性。如果特性没有受到测试的保护，则不会捕获到这一点。任何未被测试覆盖的东西都被认为是不完善的（cosmetic）。</p>
  </li>
  <li>
    <p><strong>使用适当的测试机制</strong>. 请使用单元测试来测试独立的功能，例如方法。单元测试应该在几秒内执行完成，而且应该是首选测试方法。单元测试类的名称必须以 <code>*Test </code>结尾。使用集成测试来实现长时间运行的测试。Flink 提供了测试工具来启动 Flink 实例并运行作业的端到端测试。这些测试比较重，并且会显著延长构建时间。因此，应谨慎添加它们。端到端测试类的名称必须以 <code>*ITCa   se</code> 结尾。</p>
  </li>
</ul>

<h3 class="no_toc" id="section-8">文档</h3>

<ul>
  <li><strong>文档更新</strong>。许多更改也会影响文档（Javadoc 和 <code>docs/</code> 目录中的用户文档）。这些 pull request 和补丁中需要相应地更新文档，否则这些更改无法被合并。有关如何更新文档的信息，请参阅<a href="/zh/contribute-documentation.html">文档贡献</a>指南。</li>
  <li><strong>公共方法的 Javadocs</strong>。所有的公共方法和类都需要有 Javadoc。请编写有意义的文档。好的文档是简洁和信息丰富的。如果你更改了方法的签名或行为，请务必更新 Javadoc。</li>
</ul>

<h3 class="no_toc" id="section-9">代码格式化</h3>

<ul>
  <li><strong>不要格式化</strong>。请将源文件的代码格式化保持在最低限度。如果你(或你的 IDE 自动)删除或替换空白、重新格式化代码或注释，那么 diff 就不可读了。另外，更改相同文件的其他补丁将会无法合并。请将 IDE 配置为不会自动重新格式化代码。带有过多或不必要的代码格式化的 pull request 可能会被拒绝。</li>
</ul>

<hr />

<h2 id="section-10">代码风格</h2>

<h3 id="section-11">许可证</h3>
<ul>
  <li><strong>Apache license headers。</strong> 确保你的文件头部有 Apache 许可证。当你构建代码时，RAT 插件会检查这一点。</li>
</ul>

<h3 id="section-12">导入</h3>
<ul>
  <li><strong>在包声明之前和之后添加空行。</strong></li>
  <li><strong>不要有未使用的导入。</strong></li>
  <li><strong>不要有多余的导入。</strong></li>
  <li><strong>不要使用通配符导入。</strong> 在添加代码时，甚至在重构过程中，它们都可能导致有问题。</li>
  <li><strong>导入顺序。</strong> 导入必须按字母顺序排列，分成以下几块，每个块之间用空行分隔:
    <ul>
      <li>&lt;imports from org.apache.flink.*&gt;</li>
      <li>&lt;imports from org.apache.flink.shaded.*&gt;</li>
      <li>&lt;imports from other libraries&gt;</li>
      <li>&lt;imports from javax.*&gt;</li>
      <li>&lt;imports from java.*&gt;</li>
      <li>&lt;imports from scala.*&gt;</li>
      <li>&lt;static imports&gt;</li>
    </ul>
  </li>
</ul>

<h3 id="section-13">命名</h3>
<ul>
  <li><strong>包名必须以字母开头，并且不能包含大写字母或特殊字符。</strong></li>
  <li><strong>非私有静态final字段必须是大写的，单词之间用下划线分隔。</strong> (<code>MY_STATIC_VARIABLE</code>)</li>
  <li><strong>非静态字段/方法必须使用小写开头的驼峰法。</strong> (<code>myNonStaticField</code>)</li>
</ul>

<h3 id="section-14">空格</h3>
<ul>
  <li><strong>制表符 vs 空格。</strong> 我们使用制表符缩进，而不是空格。我们在这个问题上并没有信仰偏好，只是碰巧在项目初始时使用了制表符，而不要混用空格和制表符是很重要的 (合并/差异冲突)。</li>
  <li><strong>末尾不要有空格。</strong></li>
  <li><strong>运算符和关键字两边添加空格</strong> 运算符(<code>+</code>, <code>=</code>, <code>&gt;</code>, …)和关键字 (<code>if</code>, <code>for</code>, <code>catch</code>, …) 在它们之前和之后必须有一个空格，前提是它们不在行首或行尾。</li>
</ul>

<h3 id="section-15">大括号</h3>
<ul>
  <li><strong>左花括号(‘{‘)不能放在新行上。</strong></li>
  <li><strong>右花括号(‘}’)必须始终放在行首。</strong></li>
  <li>
    <p><strong>块。</strong> 在 <code>if</code>, <code>for</code>, <code>while</code>, <code>do</code>, … 之后的所有语句都必须用花括号封装在一个块中(即使这个块包含一条语句)。</p>

    <div class="highlight"><pre><code class="language-java"><span class="k">for</span> <span class="o">(</span><span class="err">…</span><span class="o">)</span> <span class="o">{</span>
 <span class="err">…</span>
<span class="o">}</span></code></pre></div>

    <p>如果你想知道原因，请回忆一下苹果SSL库中著名的<a href="https://www.imperialviolet.org/2014/02/22/applebug.html"><em>goto bug</em></a>。</p>
  </li>
</ul>

<h3 id="javadocs">Javadocs</h3>

<ul>
  <li>
    <p><strong>所有公共/受保护的方法和类必须有一个Javadoc。</strong></p>
  </li>
  <li>
    <p><strong>Javadoc 的第一句话必须以句号结束。</strong></p>
  </li>
  <li>
    <p><strong>段落必须用新行隔开，并以&lt;p&gt;开头。</strong></p>
  </li>
</ul>

<h3 id="section-16">修饰符</h3>

<ul>
  <li>
    <p><strong>没有多余修饰符。</strong> 例如，接口方法中的 public 修饰符。</p>
  </li>
  <li>
    <p><strong>遵循 JLS3 修饰符顺序。</strong> 修饰符必须按照以下顺序排列:public、protected、private、abstract、static、final、transient、volatile、synchronized、native、strictfp。</p>
  </li>
</ul>

<h3 id="section-17">文件</h3>

<ul>
  <li>
    <p><strong>所有文件必须以<code>\n</code>结尾。</strong></p>
  </li>
  <li>
    <p><strong>文件长度不能超过3000行。</strong></p>
  </li>
</ul>

<h3 id="section-18">杂项</h3>

<ul>
  <li><strong>数组必须定义为 Java-style。</strong> 例如，<code>public String[] array</code>。</li>
  <li><strong>使用 Flink Preconditions。</strong> 为了增加一致性，请始终使用<code>org.apache.flink.Preconditions</code>的<code>checkNotNull</code>和<code>checkArgument</code>方法，Apache Commons Validate或 Google Guava。</li>
  <li><strong>不要使用原生的泛型类型。</strong> 不要使用原生的泛型类型，除非是必须需要（某些时候签名匹配、数组是必需的）。</li>
  <li><strong>Suppress warnings。</strong> 如果无法避免的警告(如“unchecked”或“serial”)，则添加注解以抑制警告。</li>
  <li>
    <p><strong>注释。</strong> 在代码中添加注释。这段代码是在做什么？添加 Javadoc 或者继承它们，而不是在方法里加注释。不要自动生成注释，并避免不必要的注释，如:</p>

    <p>​<code>java
i++; // 增加1
</code></p>
  </li>
</ul>

<hr />

<h2 id="section-19">最佳实践</h2>

<ul>
  <li>Travis: Flink 已经预先配置了 <a href="http://docs.travis-ci.com/">Travis CI</a> 。它可以很容易地为你 fork 的仓库启用（它使用 GitHub 进行身份验证，因此你不需要额外的帐户）。只需将 <em>Travis CI</em> hook 添加到你的仓库(<em>Settings –&gt; Integrations &amp; services –&gt; Add service</em>)，并在 <a href="https://travis-ci.org/profile">Travis</a> 上启用 <code>flink</code> 仓库的测试。</li>
</ul>

<hr />

<h2 id="section-20">设置开发环境</h2>

<h3 id="flink-">开发和构建 Flink 的先决条件</h3>

<ul>
  <li>类 unix 环境（我们使用 Linux、Mac OS X、以及 Cygwin）</li>
  <li>git</li>
  <li>Maven（至少 3.0.4 版本）</li>
  <li>Java 7 或 8</li>
</ul>

<h3 class="no_toc" id="section-21">克隆仓库</h3>

<p>Apache Flink 的源代码存储在 <a href="http://git-scm.com/">git</a> 仓库中，<a href="https://github.com/apache/flink">GitHub</a> 上有该仓库的镜像。在 GitHub 上交流（exchange）代码的常见方法是将仓库 fork 到个人的 GitHub 帐户中。为此，你需要有一个 <a href="https://github.com">GitHub</a> 帐户，如果没有，可以免费创建一个帐户。Fork 一个仓库意味着 GitHub 为你创建了一个该仓库的副本。可以通过点击 <a href="https://github.com/apache/flink">仓库页面</a> 右上角的 <em>Fork</em> 按钮来完成的。一旦你在个人帐户中拥有了 Flink 仓库的 fork，你就可以将该仓库克隆到你的本地计算机上。</p>

<div class="highlight"><pre><code>git clone https://github.com/&lt;your-user-name&gt;/flink.git
</code></pre></div>

<p>代码将被下载到一个名为 <code>flink</code> 的目录中。</p>

<h3 id="section-22">代理设置</h3>

<p>如果你在一个防火墙背后，可能需要为 Maven 和 IDE 配置代理。</p>

<p>例如，WikipediaEditsSourceTest 通过 IRC 进行通信，需要通过 <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html">SOCKS 代理服务器</a>。</p>

<h3 class="no_toc" id="ide-">安装一个 IDE 并导入源代码</h3>

<p>Flink 提交者使用 IntelliJ IDEA 和 Eclipse IDE 开发 Flink 源码。</p>

<p>IDE 的最低要求是:</p>

<ul>
  <li>支持 Java 和 Scala（也要支持混合项目）</li>
  <li>支持 Maven （能用于 Java 和 Scala）</li>
</ul>

<h4 id="intellij-idea">IntelliJ IDEA</h4>

<p>IntelliJ IDE 支持了开箱即用的 Maven，并且提供了 Scala 开发的插件。</p>

<ul>
  <li>IntelliJ 下载: <a href="https://www.jetbrains.com/idea/">https://www.jetbrains.com/idea/</a></li>
  <li>IntelliJ Scala 插件: <a href="http://plugins.jetbrains.com/plugin/?id=1347">http://plugins.jetbrains.com/plugin/?id=1347</a></li>
</ul>

<p>查看我们的 <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.7/flinkDev/ide_setup.html#intellij-idea">安装配置 IntelliJ</a> 指南以获得详细信息。</p>

<h4 id="eclipse-scala-ide">Eclipse Scala IDE</h4>

<p>对于 Eclipse 用户，我们建议使用基于 Eclipse Kepler 的 Scala IDE 3.0.3。这是一个稍微老一点的版本，
我们发现它是对 Flink 这样的复杂项目最有效的版本。</p>

<p>有关最新 Scala IDE 版本的详细信息和指南，请参阅 <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.7/flinkDev/ide_setup.html#eclipse">如何安装配置Eclipse</a> 文档。</p>

<p><strong>注意:</strong>在执行如下设置之前，请确保在命令行运行构建一次 （<code>mvn clean install -DskipTests</code>；见下文）.</p>

<ol>
  <li>下载 Scala IDE (首选)或将插件安装到 Eclipse Kepler。请查阅
<a href="https://ci.apache.org/projects/flink/flink-docs-release-1.7/flinkDev/ide_setup.html#eclipse">如何安装配置Eclipse</a> 下载链接和说明。</li>
  <li>添加 “macroparadise” 编译器插件到Scala编译器中。
打开 “Window” -&gt; “Preferences” -&gt; “Scala” -&gt; “Compiler” -&gt; “Advanced” 并将 <em>macroparadise</em> jar 包路径填到 “Xplugin” 字段中（通常是 “/home/<em>-your-user-</em>/.m2/repository/org/scalamacros/paradise_2.10.4/2.0.1/paradise_2.10.4-2.0.1.jar”）。
注意:如果你没有jar文件，那么你可能没有运行命令行构建。</li>
  <li>导入 Flink Maven 项目 (“File” -&gt; “Import” -&gt; “Maven” -&gt; “Existing Maven Projects”)</li>
  <li>在导入期间，Eclipse 将要求自动安装额外的 Maven 构建助手插件。</li>
  <li>关闭“flink-java8”项目。因为 Eclipse Kepler 不支持 Java 8，所以你不能开发这个项目。</li>
</ol>

<h4 id="section-23">导入源代码</h4>

<p>Apache Flink 使用 Apache Maven 作为构建工具。大多数 IDE 都能够导入 Maven 项目。</p>

<h3 class="no_toc" id="section-24">构建代码</h3>

<p>要从源代码构建 Flink ，打开终端，导航到 Flink 源代码的根目录，调用:</p>

<div class="highlight"><pre><code>mvn clean package
</code></pre></div>

<p>这将构建 Flink 并运行所有测试。Flink 将安装到 <code>build-target</code> 中。</p>

<p>要构建 Flink 而不执行测试，你可以调用:</p>

<div class="highlight"><pre><code>mvn -DskipTests clean package
</code></pre></div>

<hr />

<h2 id="committer--git">Committer 如何使用 Git</h2>

<p>只有 ASF 的基础架构团队可以管理访问 GitHub 镜像。因此，comitters 必须将更改推送到 ASF 的 git 仓库。</p>

<h3 class="no_toc" id="section-25">主仓库</h3>

<p><strong>ASF writable</strong>: https://gitbox.apache.org/repos/asf/flink.git</p>

<p><strong>ASF read-only</strong>: https://github.com/apache/flink.git</p>

<p>注意: Flink 不使用 Oracle JDK 6 构建。它可以使用 Oracle JDK 6 运行。</p>

<p>如果你想为 Hadoop 1 构建，可以通过<code>mvn clean package -DskipTests -Dhadoop.profile=1</code>来生效 build profile。</p>



  </div>
</div>

      </div>
    </div>

    <hr />

    <div class="row">
      <div class="footer text-center col-sm-12">
        <p>Copyright © 2014-2019 <a href="http://apache.org">The Apache Software Foundation</a>. All Rights Reserved.</p>
        <p>Apache Flink, Flink®, Apache®, the squirrel logo, and the Apache feather logo are either registered trademarks or trademarks of The Apache Software Foundation.</p>
        <p><a href="/privacy-policy.html">Privacy Policy</a> &middot; <a href="/blog/feed.xml">RSS feed</a></p>
      </div>
    </div>
    </div><!-- /.container -->

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.matchHeight/0.7.0/jquery.matchHeight-min.js"></script>
    <script src="/js/codetabs.js"></script>
    <script src="/js/stickysidebar.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
